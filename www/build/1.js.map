{"version":3,"sources":["../../src/pages/create-doador/create-doador.module.ts","../../src/validators/confirmPassword.ts","../../src/pages/create-doador/create-doador.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CreateDoadorPage } from './create-doador';\n\n@NgModule({\n  declarations: [\n    CreateDoadorPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CreateDoadorPage),\n  ],\n})\nexport class CreateDoadorPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/create-doador/create-doador.module.ts","import { AbstractControl } from \"@angular/forms\";\r\n// Valida se as senhas do cadastro são iguais\r\nexport function ValidateConfirmPassword(control: AbstractControl) {\r\n    if (!control.root.value) {\r\n        return null;\r\n    }\r\n\r\n    if (control.value === control.root.value.password) {\r\n        return null;\r\n    } else {\r\n        return { validConfirmPassword: true };\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/confirmPassword.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\n// Import da Validação de senhas iguais\r\nimport { ValidateConfirmPassword } from '../../validators/confirmPassword';\r\n\r\n// Imports do Firebase\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\n\r\n// Imports do IonicStorage\r\nimport { Storage } from '@ionic/storage';\r\n\r\n// Nomeia a página para redirecionamento\r\n@IonicPage({\r\n  name: 'create-doador'\r\n})\r\n@Component({\r\n  selector: 'page-create-doador',\r\n  templateUrl: 'create-doador.html',\r\n})\r\nexport class CreateDoadorPage {\r\n  uid: string;\r\n  nomeDoador;\r\n  registerForm: FormGroup;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    //  Declaração para integração com IonicStorage \r\n    public storage: Storage,\r\n    //  Declaração para integração com Firebase \r\n    public db: AngularFireDatabase,\r\n    //  Declaração para integração com Firebase \r\n    public afAuth: AngularFireAuth,\r\n    //  Declaração para Pop-up de Alertas \r\n    public alertCtrl: AlertController,\r\n    //  Criação da validação de obrigatoriedade do formulario de cadastro \r\n    public formbuild: FormBuilder\r\n  ) {\r\n    this.registerForm = this.formbuild.group({\r\n      name: [null, [Validators.required, Validators.minLength(5)]],\r\n      email: [null, [Validators.required, Validators.email]],\r\n      password: [null, [Validators.required, Validators.minLength(2)]],\r\n      // Valida se as senhas do cadastro são iguais (ValidateConfirmPassword)      \r\n      passwordConfirm: [null, [Validators.required, Validators.minLength(2), ValidateConfirmPassword]],\r\n\r\n    })\r\n  }\r\n\r\n    // Metodo para submeter os dados de Email e senha\r\n    submitForm() {\r\n      //  Comando utilizado para gerar LOG para parametros de entrada    \r\n      //  console.log(this.registerForm.value)\r\n      //  Passagem de parametros\r\n      this.afAuth.auth.createUserWithEmailAndPassword(\r\n        this.registerForm.value.email,\r\n        this.registerForm.value.password)\r\n        //  Quando for sucesso, colocar mensagem \"Cadastro realizado com Sucesso\"\r\n        .then((response) => {\r\n          // Chama o metodo para adicionar campos na tabela\r\n          this.addDados('nomeDoador', this.registerForm.value.name);\r\n          this.addDados('emailDoador', this.registerForm.value.email);\r\n          this.addDados('dataNascDoador', '00/00/0000');\r\n          this.addDados('sexoDoador', 'N/A');\r\n          // Chama o metodo de pop-up \r\n          this.presentAlert('Usuário Cadastrado', 'Usuário cadastrado com sucesso!');\r\n          // Redireciona para a pagina nomeada como 'start-page' no start.ts\r\n          this.navCtrl.setRoot('start-doador');\r\n        })\r\n      //  Quando for erro\r\n      .catch((error) => {\r\n        switch (error.code) {\r\n          // De Erro no cadastro do usuário\r\n          case 'auth/email-already-in-use':\r\n            // Chama o metodo de pop-up \r\n            this.presentAlert('Erro', 'E-mail já cadastrado!')\r\n            break;\r\n          // Desconhecido\r\n          default:\r\n            // Chama o metodo de pop-up \r\n            this.presentAlert('Erro Insert', 'Erro desconhecido, por favor procurar o suporte')\r\n            break;\r\n        }\r\n      })\r\n  }\r\n\r\n  // Metodo para pop-up\r\n  presentAlert(title: string, subtitle: string) {\r\n    let alert = this.alertCtrl.create({\r\n      title: title,\r\n      subTitle: subtitle,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  // Metodo para salvar informação apartir da chave do usuário\r\n  addDados(nomeCampo: string, valorCampo: string) {\r\n    var usuarioLogado = this.afAuth.auth.currentUser;\r\n    var userDB = this.db.database.ref('/DadosDoadores').child(usuarioLogado.uid);\r\n    userDB.child(nomeCampo).set(valorCampo);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/create-doador/create-doador.ts"],"sourceRoot":""}